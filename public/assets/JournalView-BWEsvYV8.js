import{u as y,j as e,r as o,A as w,L as D}from"./index-CBFEDf3H.js";import{F as v}from"./FloatingMenu-BHnCW29d.js";import{P as C}from"./plus-CgOwzzsp.js";import{u as N}from"./http-hook-p1xhn-Qx.js";import{E as k}from"./ErrorCard-DyotIidg.js";import{I as S}from"./InfoCard-CftPNzxO.js";import{C as A}from"./chevron-left-6QVRpj_g.js";import{C as E}from"./chevron-right-CAPabnxr.js";import{P as I}from"./pencil-Cb2VhuQ0.js";import{T as J}from"./trash-DWz3AGdx.js";import"./createLucideIcon-BukOYC3u.js";const L=({logo:a,link:r,color:s})=>{const i=y(),l=()=>{r&&i(r)};return e.jsx("div",{className:"fixed bottom-24 right-6 z-50",children:e.jsx("button",{onClick:l,className:`${s||"bg-primary active:bg-primary-darker text-white"} p-4 rounded-full shadow-lg transition-all duration-200 active:scale-95 flex items-center justify-center`,"aria-label":"Chat on WhatsApp",children:a||e.jsx(C,{})})})},P=a=>{const r=a.getDay(),s=a.getDate()-r+(r===0?-6:1);return new Date(a.setDate(s))},O=()=>{const[a,r]=o.useState(),[s,i]=o.useState(P(new Date)),[l,c]=o.useState(!1),{isLoading:d,error:m,sendRequest:u,setError:g}=N(),p=o.useContext(w);o.useEffect(()=>{(async()=>{const n=`https://ppg-academic-system-9b62c1c7b604.herokuapp.com/api/journals/${p.userId}?week=${s.toISOString()}`;console.log(n);try{const f=await u(n);r(f.journals)}catch{}})()},[u,s]);const h=t=>new Date(t).toLocaleDateString("id-ID",{weekday:"long",day:"2-digit",month:"long",year:"numeric",timeZone:"Asia/Jakarta"}),j=t=>new Date(t).toLocaleTimeString("id-ID",{hour12:!1,hour:"2-digit",minute:"2-digit",timeZone:"Asia/Jakarta"}),x=t=>{const n=new Date(s);n.setDate(s.getDate()+t*7),i(n)},b=t=>{i(new Date(t.target.value)),c(!1)};return e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"m-2",children:e.jsx(k,{error:m,onClear:()=>g(null)})}),e.jsxs("div",{className:"flex justify-between items-center m-5 px-10",children:[e.jsx("button",{onClick:()=>x(-1),children:e.jsx("div",{className:"p-2 border-2 rounded-full bg-white active:bg-gray-400",children:e.jsx(A,{size:24})})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(!l),children:h(s)}),l&&e.jsx("input",{type:"month",className:"absolute top-full -left-4 mt-1 border rounded-full px-4 py-2",onChange:b})]}),e.jsx("button",{onClick:()=>x(1),children:e.jsx("div",{className:"p-2 border-2 rounded-full bg-white active:bg-gray-400",children:e.jsx(E,{size:24})})})]}),d&&e.jsx("div",{className:"flex justify-center mt-16",children:e.jsx(D,{size:32})}),a&&!d&&e.jsxs(e.Fragment,{children:[a.length>=1&&a.map(t=>e.jsx("div",{className:"card-basic mx-4 rounded-3xl shadow-sm justify-start",children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-xs text-gray-400 font-medium uppercase",children:h(t.createdAt)}),e.jsx("h3",{className:"text-xs text-gray-400 font-medium uppercase",children:j(t.createdAt)}),e.jsx("h2",{className:"my-4 text-lg text-gray-500 font-normal",children:t.title}),e.jsx("h4",{className:"text-base text-black font-normal",children:t.content})]}),e.jsx(v,{style:"flex items-center gap-2 p-2 border border-gray-300 bg-white hover:bg-gray-200 rounded-full text-sm font-medium transition-colors",buttons:[{icon:I,label:"Edit"},{icon:J,label:"Delete",variant:"danger"}]})]})})),a.length===0&&e.jsx(S,{className:"mx-4",children:e.jsx("h3",{className:"text-gray-500 italic",children:"Tidak ada data"})}),e.jsx(L,{link:"/journal/new"})]})]})};export{O as default};
