import{r as s,A as x,u as y,j as e,L as j}from"./index-CBFEDf3H.js";import{u as N}from"./http-hook-p1xhn-Qx.js";import{D as T}from"./DynamicForm-DnFPMFU5.js";import{E as S}from"./ErrorCard-DyotIidg.js";import{M as q}from"./ModalBottomClose-CrGWDDNY.js";import"./iconify-icon-C1YYA-Pd.js";const L=()=>{const[o,i]=s.useState(!1),[n,m]=s.useState(!1),[u,M]=s.useState(!1),{isLoading:t,error:r,sendRequest:d,setError:p}=N();s.useContext(x);const c=y(),h=[{name:"name",label:"Name",placeholder:"Nama Lengkap",type:"text",required:!0},{name:"email",label:"Email",placeholder:"Email",type:"email",required:!0},{name:"nid",label:"NID",placeholder:"NID",type:"text",required:!0},{name:"phone",label:"Nomor HP Aktif",placeholder:"Nomor HP Aktif",type:"text",required:!0},{name:"position",label:"Posisi",type:"select",required:!0,options:[{label:"Guru",value:"teacher"},{label:"Assisten",value:"assistant"}]},{name:"dateOfBirth",label:"Tanggal Lahir",placeholder:"Tanggal Lahir",type:"text",required:!0},{name:"gender",label:"Jenis Kelamin",type:"select",required:!0,options:[{label:"Laki-laki",value:"male"},{label:"Perempuan",value:"female"}]},{name:"address",label:"Alamat",placeholder:"Alamat",type:"text",required:!0},{name:"positionStartDate",label:"Mulai Masa Tugas",placeholder:"Mulai Masa Tugas",type:"text",required:!0}],b=async a=>{const g="https://ppg-academic-system-9b62c1c7b604.herokuapp.com/api/teachers/",f=JSON.stringify({name:a.name,email:a.email,nid:a.nid,phone:a.phone,position:a.position,dateOfBirth:a.dateOfBirth,gender:a.gender,address:a.address,positionStartDate:a.positionStartDate});let l;try{l=await d(g,"POST",f,{"Content-Type":"application/json"}),m(l.message),i(!0)}catch{}};return e.jsxs("div",{className:"m-auto max-w-md mt-14 md:my-8",children:[e.jsx(q,{isOpen:o,onClose:()=>i(!1),title:"Berhasil!",footer:e.jsx(e.Fragment,{children:e.jsx("button",{onClick:()=>{i(!1),c("/settings/users/")},className:"btn-danger-outline",children:"Tutup"})}),children:n}),r&&e.jsx(S,{error:r,onClear:()=>p(null)}),e.jsx("div",{className:`pb-24 transition-opacity duration-300 ${u?"opacity-0":"opacity-100"}`,children:e.jsx(T,{title:"Tambah Tenaga Pendidik",subtitle:"Sistem Absensi Digital",fields:h,onSubmit:b,disabled:t,reset:!1,footer:!1,labels:!1,button:e.jsx("div",{className:"flex flex-col justify-stretch mt-4",children:e.jsx("button",{type:"submit",className:`button-primary ${t?"opacity-50 cursor-not-allowed":""}`,disabled:t,children:t?e.jsx(j,{children:"Processing..."}):"Tambah"})})})})]})};export{L as default};
