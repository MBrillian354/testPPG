import{r as t}from"./index-CBFEDf3H.js";const m=()=>{const[c,e]=t.useState(!1),[l,n]=t.useState(null),s=t.useRef([]),i=t.useCallback(async(o,f="GET",g=null,h={})=>{e(!0),n(null);const a=new AbortController;s.current.push(a);try{const r=await fetch(o,{method:f,body:g,headers:h,signal:a.signal}),u=await r.json();if(s.current=s.current.filter(p=>p!==a),!r.ok)throw new Error(u.message||"Something went wrong");return e(!1),u}catch(r){if(r.name==="AbortError")return;throw e(!1),n(r.message||"Gagal menghubungi server!"),r}},[]);return t.useEffect(()=>()=>{s.current.forEach(o=>o.abort())},[]),{isLoading:c,error:l,sendRequest:i,setError:n,setIsLoading:e}};export{m as u};
