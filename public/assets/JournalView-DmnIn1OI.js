import{u as y,j as e,r as i,a as w,A as v,E as D,C,L as N}from"./index-CQE6waEO.js";import{F as k}from"./FloatingMenu-Bh-8tKSE.js";import{P as S}from"./plus-B9YC-ubx.js";import{C as A}from"./chevron-right-D4vRLyGS.js";import{P as E}from"./pencil-Cb7Xn9Hi.js";import{T as J}from"./trash-CgJT2hTw.js";const L=({logo:a,link:r,color:s})=>{const o=y(),l=()=>{r&&o(r)};return e.jsx("div",{className:"fixed bottom-24 right-6 z-50",children:e.jsx("button",{onClick:l,className:`${s||"bg-primary active:bg-primary-darker text-white"} p-4 rounded-full shadow-lg transition-all duration-200 active:scale-95 flex items-center justify-center`,"aria-label":"Chat on WhatsApp",children:a||e.jsx(S,{})})})},P=a=>{const r=a.getDay(),s=a.getDate()-r+(r===0?-6:1);return new Date(a.setDate(s))},R=()=>{const[a,r]=i.useState(),[s,o]=i.useState(P(new Date)),[l,c]=i.useState(!1),{isLoading:d,error:m,sendRequest:u,setError:f}=w(),j=i.useContext(v);i.useEffect(()=>{(async()=>{const n=`https://ppg-academic-system-9b62c1c7b604.herokuapp.com/api/journals/${j.userId}?week=${s.toISOString()}`;console.log(n);try{const g=await u(n);r(g.journals)}catch{}})()},[u,s]);const h=t=>new Date(t).toLocaleDateString("id-ID",{weekday:"long",day:"2-digit",month:"long",year:"numeric",timeZone:"Asia/Jakarta"}),p=t=>new Date(t).toLocaleTimeString("id-ID",{hour12:!1,hour:"2-digit",minute:"2-digit",timeZone:"Asia/Jakarta"}),x=t=>{const n=new Date(s);n.setDate(s.getDate()+t*7),o(n)},b=t=>{o(new Date(t.target.value)),c(!1)};return e.jsxs(e.Fragment,{children:[m&&e.jsx("div",{className:"m-2",children:e.jsx(D,{error:m,onClear:()=>f(null)})}),e.jsxs("div",{className:"flex justify-between items-center m-5 px-10",children:[e.jsx("button",{onClick:()=>x(-1),children:e.jsx("div",{className:"p-2 border-2 rounded-full bg-white active:bg-gray-400",children:e.jsx(C,{size:24})})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(!l),children:h(s)}),l&&e.jsx("input",{type:"month",className:"absolute top-full -left-4 mt-1 border rounded-full px-4 py-2",onChange:b})]}),e.jsx("button",{onClick:()=>x(1),children:e.jsx("div",{className:"p-2 border-2 rounded-full bg-white active:bg-gray-400",children:e.jsx(A,{size:24})})})]}),d&&e.jsx("div",{className:"flex justify-center mt-16",children:e.jsx(N,{size:32})}),a&&!d&&e.jsxs(e.Fragment,{children:[a.length>=1&&a.map(t=>e.jsx("div",{className:"card-basic mx-4 rounded-3xl shadow-sm justify-start",children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-xs text-gray-400 font-medium uppercase",children:h(t.createdAt)}),e.jsx("h3",{className:"text-xs text-gray-400 font-medium uppercase",children:p(t.createdAt)}),e.jsx("h2",{className:"my-4 text-lg text-gray-500 font-normal",children:t.title}),e.jsx("h4",{className:"text-base text-black font-normal",children:t.content})]}),e.jsx(k,{style:"flex items-center gap-2 p-2 border border-gray-300 bg-white hover:bg-gray-200 rounded-full text-sm font-medium transition-colors",buttons:[{icon:E,label:"Edit"},{icon:J,label:"Delete",variant:"danger"}]})]})})),a.length===0&&e.jsx("div",{className:"card-basic mx-4 rounded-3xl shadow-sm justify-center items-center",children:e.jsx("h3",{className:"text-gray-500 italic",children:"Tidak ada data"})}),e.jsx(L,{link:"/journal/new"})]})]})};export{R as default};
