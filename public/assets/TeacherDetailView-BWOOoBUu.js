import{b as N,r as i,A as y,d as w,j as e,L as v,e as m,E as P,N as x,P as k}from"./index-CtFlY6jk.js";import{I as r}from"./iconify-De8XxYzP.js";const I=()=>{const{isLoading:p,sendRequest:n}=N(),[o,u]=i.useState([]),[s,g]=i.useState(null),[f,b]=i.useState(),h=i.useContext(y),c=w().teacherId,d=t=>new Date(t).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric",timeZone:"Asia/Jakarta"}),j=t=>{switch(t){case"branchTeacher":return"MT Desa";case"teachingGroupTeacher":return"MT Kelompok";case"localTeacher":return"MS";case"assistant":return"Asisten";default:return""}};return i.useEffect(()=>{(async()=>{const l=h.userRole!=="teacher"?`https://ppg-academic-system-9b62c1c7b604.herokuapp.com/api/teachers/${c}`:`https://ppg-academic-system-9b62c1c7b604.herokuapp.com/api/teachers/user/${h.userId}`;try{const a=await n(l);console.log(a.teacher),b(a.teacher.isProfileComplete),u([{label:"NID",value:a.teacher.nid,icon:e.jsx(r,{icon:"icon-park-outline:id-card-h",width:"24",height:"24"})},{label:"Nomor HP",value:a.teacher.phone,icon:e.jsx(r,{icon:"tabler:phone",width:"24",height:"24"})},{label:"Tanggal Lahir",value:d(a.teacher.dateOfBirth),icon:e.jsx(r,{icon:"material-symbols:date-range-outline",width:"24",height:"24"})},{label:"Jenis Kelamin",value:a.teacher.gender?a.teacher.gender==="male"?"Laki-laki":"Perempuan":"",icon:e.jsx(r,{icon:"tabler:gender-bigender",width:"24",height:"24"})},{label:"Domisili",value:a.teacher.address,icon:e.jsx(r,{icon:"ph:map-pin-bold",width:"24",height:"24"})},{label:"Posisi",value:j(a.teacher.position),icon:e.jsx(r,{icon:"material-symbols:category-outline-rounded",width:"24",height:"24"})},{label:"Mulai Masa Tugas",value:d(a.teacher.positionStartDate),icon:e.jsx(r,{icon:"lucide:briefcase",width:"24",height:"24"})}]),g({name:a.teacher.name,nid:a.teacher.nid,image:a.teacher.image,branch:a.teacher.userId.teachingGroupId.branchId.name,teachingGroup:a.teacher.userId.teachingGroupId.name})}catch{}})()},[n]),e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 md:p-8 pb-24",children:[p&&e.jsx("div",{className:"flex justify-center mt-16",children:e.jsx(v,{size:32})}),o.length>0&&s&&e.jsxs(e.Fragment,{children:[!f&&e.jsx(m,{to:`/dashboard/teachers/${c}/update`,children:e.jsx(P,{error:"Profile belum lengkap! Lengkapi",onClear:()=>setError(null)})}),e.jsx("h1",{className:"text-2xl font-medium mb-6 text-gray-700",children:"Biodata Tenaga Pendidik"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 md:gap-8",children:[e.jsxs("div",{className:"card-basic border mx-0 py-12 flex flex-col items-center flex-1 basis-96 min-w-80 md:max-w-96",children:[e.jsx("img",{src:s!=null&&s.image?`https://ppg-academic-system-9b62c1c7b604.herokuapp.com/api/${s.image}`:"https://upload.wikimedia.org/wikipedia/commons/7/7c/Profile_avatar_placeholder_large.png?20150327203541",alt:"Profile",className:"mt-2 rounded-md size-48 md:size-64 shrink-0"}),e.jsx("h2",{className:"mt-4 text-lg font-normal",children:s.name}),e.jsx("p",{className:"mt-2 text-gray-600",children:s.nid}),e.jsxs("div",{className:"mt-4 flex flex-col md:flex-row gap-2 text-center",children:[e.jsx(x,{to:"",className:"badge-primary",children:s.branch}),e.jsx(x,{to:"",className:"badge-primary",children:s.teachingGroup})]})]}),e.jsxs("div",{className:"card-basic p-8 flex flex-col border mx-0 flex-1 justify-start",children:[e.jsx("h2",{className:"text-lg mb-8",children:"Profile Tenaga Pendidik"}),e.jsx("ul",{className:"space-y-6",children:o.map((t,l)=>e.jsxs("li",{className:"flex items-center gap-2 mb-2",children:[t.icon&&e.jsx("div",{className:"text-primary",children:t.icon}),e.jsxs("span",{className:"font-semibold",children:[t.label,":"]}),e.jsx("span",{className:"font-medium text-gray-700",children:t.value})]},l))}),e.jsx(m,{to:`/dashboard/teachers/${c}/update`,className:"place-self-end",children:e.jsxs("button",{className:"button-primary pl-[11px] mt-6 md:mt-0",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]})]})]})]})};export{I as default};
