import{u as y,j as e,r as n,a as v,A as w,L as C,E as D}from"./index-DxpnSoUb.js";import{F as N}from"./FloatingMenu-ChfBLfgd.js";import{P as k}from"./plus-JqA2Jq-B.js";import{C as S}from"./chevron-left-B0WaMoq3.js";import{C as A}from"./chevron-right-DTjVLbOj.js";import{P as E}from"./pencil-BZEJ7oKo.js";import{T as J}from"./trash-DMahMBGP.js";import"./createLucideIcon-DApO49cG.js";const L=({logo:s,link:i,color:a})=>{const o=y(),l=()=>{i&&o(i)};return e.jsx("div",{className:"fixed bottom-24 right-6 z-50",children:e.jsx("button",{onClick:l,className:`${a||"bg-primary active:bg-primary-darker text-white"} p-4 rounded-full shadow-lg transition-all duration-200 active:scale-95 flex items-center justify-center`,"aria-label":"Chat on WhatsApp",children:s||e.jsx(k,{})})})},Z=()=>{const[s,i]=n.useState(),[a,o]=n.useState(new Date),[l,c]=n.useState(!1),{isLoading:d,error:m,sendRequest:u,setError:f}=v(),j=n.useContext(w);n.useEffect(()=>{(async()=>{const r=`https://ppg-academic-system-9b62c1c7b604.herokuapp.com/api/journals/${j.userId}?week=${a.toISOString()}`;console.log(r);try{const g=await u(r);i(g.journals)}catch{}})()},[u,a]);const h=t=>new Date(t).toLocaleDateString("id-ID",{weekday:"long",day:"2-digit",month:"long",year:"numeric",timeZone:"Asia/Jakarta"}),p=t=>new Date(t).toLocaleTimeString("id-ID",{hour12:!1,hour:"2-digit",minute:"2-digit",timeZone:"Asia/Jakarta"}),x=t=>{const r=new Date(a);r.setDate(a.getDate()+t*7),o(r)},b=t=>{o(new Date(t.target.value)),c(!1)};return e.jsxs(e.Fragment,{children:[d&&e.jsx("div",{className:"flex justify-center mt-16",children:e.jsx(C,{size:32})}),m&&e.jsx("div",{className:"m-2",children:e.jsx(D,{error:m,onClear:()=>f(null)})}),s&&!d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center m-5 px-10",children:[e.jsx("button",{onClick:()=>x(-1),children:e.jsx("div",{className:"p-2 border-2 rounded-full bg-white active:bg-gray-400",children:e.jsx(S,{size:24})})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(!l),children:h(a)}),l&&e.jsx("input",{type:"month",className:"absolute top-full -left-4 mt-1 border rounded-full px-4 py-2",onChange:b})]}),e.jsx("button",{onClick:()=>x(1),children:e.jsx("div",{className:"p-2 border-2 rounded-full bg-white active:bg-gray-400",children:e.jsx(A,{size:24})})})]}),s.length>=1&&s.map(t=>e.jsx("div",{className:"card-basic mx-4 rounded-3xl shadow-sm justify-start",children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-xs text-gray-400 font-medium uppercase",children:h(t.createdAt)}),e.jsx("h3",{className:"text-xs text-gray-400 font-medium uppercase",children:p(t.createdAt)}),e.jsx("h2",{className:"my-4 text-lg text-gray-500 font-normal",children:t.title}),e.jsx("h4",{className:"text-base text-black font-normal",children:t.content})]}),e.jsx(N,{style:"flex items-center gap-2 p-2 border border-gray-300 bg-white hover:bg-gray-200 rounded-full text-sm font-medium transition-colors",buttons:[{icon:E,label:"Edit"},{icon:J,label:"Delete",variant:"danger"}]})]})})),s.length===0&&e.jsx("div",{className:"card-basic mx-4 rounded-3xl shadow-sm justify-center items-center",children:e.jsx("h3",{className:"text-gray-500 italic",children:"Tidak ada data"})}),e.jsx(L,{link:"/journal/new"})]})]})};export{Z as default};
