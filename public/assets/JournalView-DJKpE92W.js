import{r,b as p,A as w,j as e,E as D,C as v,a as N,L as C,F as k,P as S,T as E,I as A,x as I}from"./index-Baf2cdGO.js";const J=s=>{const l=s.getDay(),a=s.getDate()-l+(l===0?-6:1);return new Date(s.setDate(a))},F=()=>{const[s,l]=r.useState(),[a,i]=r.useState(J(new Date)),[o,c]=r.useState(!1),{isLoading:d,error:x,sendRequest:u,setError:g}=p(),j=r.useContext(w);r.useEffect(()=>{(async()=>{const n=`http://103.127.133.63:5000/api/journals/${j.userId}?week=${a.toISOString()}`;console.log(n);try{const f=await u(n);l(f.journals)}catch{}})()},[u,a]);const h=t=>new Date(t).toLocaleDateString("id-ID",{weekday:"long",day:"2-digit",month:"long",year:"numeric",timeZone:"Asia/Jakarta"}),b=t=>new Date(t).toLocaleTimeString("id-ID",{hour12:!1,hour:"2-digit",minute:"2-digit",timeZone:"Asia/Jakarta"}),m=t=>{const n=new Date(a);n.setDate(a.getDate()+t*7),i(n)},y=t=>{i(new Date(t.target.value)),c(!1)};return e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"m-2",children:e.jsx(D,{error:x,onClear:()=>g(null)})}),e.jsxs("div",{className:"flex justify-between items-center m-5 px-10 text-base",children:[e.jsx("button",{onClick:()=>m(-1),children:e.jsx("div",{className:"p-2 border-2 rounded-full bg-white active:bg-gray-400",children:e.jsx(v,{size:24})})}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>c(!o),children:h(a)}),o&&e.jsx("input",{type:"month",className:"absolute top-full -left-4 mt-1 border rounded-full px-4 py-2",onChange:y})]}),e.jsx("button",{onClick:()=>m(1),children:e.jsx("div",{className:"p-2 border-2 rounded-full bg-white active:bg-gray-400",children:e.jsx(N,{size:24})})})]}),d&&e.jsx("div",{className:"flex justify-center mt-16",children:e.jsx(C,{size:32})}),s&&!d&&e.jsxs(e.Fragment,{children:[e.jsx("ul",{children:s.length>=1&&s.map(t=>e.jsx("li",{className:"card-basic mx-4 rounded-3xl shadow-sm justify-start",children:e.jsx("div",{className:"flex justify-between w-full",children:e.jsxs("div",{className:"flex flex-col  w-full",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("h3",{className:"text-xs text-gray-400 font-medium uppercase",children:h(t.createdAt)}),e.jsx("h3",{className:"text-xs text-gray-400 font-medium uppercase",children:b(t.createdAt)})]}),e.jsx(k,{style:"flex items-center gap-2 p-2 border border-gray-300 bg-white hover:bg-gray-200 rounded-full text-sm font-medium transition-colors",buttons:[{icon:S,label:"Edit"},{icon:E,label:"Delete",variant:"danger"}]})]}),e.jsx("h2",{className:"my-2 text-xl text-gray-700 font-medium",children:t.title}),e.jsx("h4",{className:"text-base text-black font-normal text-justify",children:t.content})]})})},t._id))}),s.length===0&&e.jsx(A,{className:"mx-4",children:e.jsx("h3",{className:"text-gray-500 italic",children:"Tidak ada data"})}),e.jsx(I,{link:"/journal/new"})]})]})};export{F as default};
