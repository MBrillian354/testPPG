import{r as t}from"./index-CUVeWTx6.js";const m=()=>{const[c,s]=t.useState(!1),[l,n]=t.useState(null),e=t.useRef([]),i=t.useCallback(async(o,f="GET",g=null,h={})=>{s(!0),n(null);const a=new AbortController;e.current.push(a);try{const r=await fetch(o,{method:f,body:g,headers:h,signal:a.signal}),u=await r.json();if(e.current=e.current.filter(p=>p!==a),!r.ok)throw new Error(u.message||"Something went wrong");return s(!1),u}catch(r){if(r.name==="AbortError")return;throw s(!1),n(r.message||"Gagal menghubungi server!"),r}},[]);return t.useEffect(()=>()=>{e.current.forEach(o=>o.abort())},[]),{isLoading:c,error:l,sendRequest:i,setError:n}};export{m as u};
